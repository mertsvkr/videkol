<html>
<template id="roomTemplate">
    <div class="room">
        <p id="roomTitle" class="roomTitleP"></p>
    </div>
</template>

<template id="messageTemplate">
    <div class="bubble">
        <p class="messageFrom" style="font-weight:bold"></p>
        <p class="messageContent"></p>
    </div>
</template>

<template id="remoteVideoTemplate">
    <video autoplay class="remote-video"></video>
</template>

<head>
    <script src="./scripts/constants.js"></script>
    <script src="/socket.io/socket.io.js"></script>
	<script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <link rel="stylesheet" href="./styles/home.css">
</head>

<body>
    <div id="headerDiv">
		<img id="logo" src="./styles/mbchat.png" alt="chat">
        <p>Welcome <%=email%></p>
        <button id="logoutButton">Log out</button>
    </div>
    <div id="pageContentsDiv">
        <div id="videocall">
            <video autoplay muted class="local-video" id="local-video"></video>
			<button class="btn" id="endCallButton" style="display: none;"><i class="fas fa-video-slash"></i>End Call</button>
            <p id="comingCallInfo"></p>
            <button id="acceptCall" style="display: none;">accept call</button>
            <button id="acceptScreen" style="display: none;">accept screen share</button>
        </div>
        <div id="messagingDivPlaceholder">
            Choose a chat room...
        </div>
        <div id="messagingDiv" style="display: none;">
            <div id="messagingHeaderDiv">
                <p id="messagingRoomTitle"></p>
				<div id="buttons">
					<button class="btn" id="sendCallRequestButton"><i class="fas fa-video">Video Call</i></button>
					<button class="btn" id="sendScreenShareRequestButton"><i class="fas fa-desktop">Share Screen</i></button>
				</div>
            </div>
            <div id="messagesDiv">

            </div>
            <div id="sendMessageDiv">
                <input type="text" placeholder="Your message text..." id="messageTextInput">
                <button class="btn" id="sendMessageButton"><i class="far fa-comment-alt"></i>Send</button>
				
				
                <input class="btn" type="file" id="messageFileInput"> 
                
                
            </div>
        </div>
        <div id="roomRelatedDiv">
            <div id="roomsDiv">

            </div>
            <div id="createRoomDiv">
                <input type="text" id="newRoomTitle" placeholder="room title">
                <input type="text" id="newRoomParticipants" placeholder="email1@example.com;email2@example.com;...">
                <button id="createRoomButton">Create Room</button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
</body>

<script src="/scripts/auth.js"></script>
<script src="/scripts/communication.js"></script>
<script>
    window.onload = () => {
        createSocketConnection()
        setAuthButtonActions()
        setCommunicationButtonActions()
    }
</script>



</html>
